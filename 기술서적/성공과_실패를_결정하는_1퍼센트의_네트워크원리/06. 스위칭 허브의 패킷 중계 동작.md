# 06. 스위칭 허브의 패킷 중계 동작

#### 1. 스위칭 허브는 주소 테이블로 중계한다.

- 스위칭 허브의 포트는 수신처 MAC 주소를 검사하지 않고 모든 패킷을 수신하여 `버퍼 메모리`에 저장하기 때문에 스위칭 허브의 포트에는 LAN 어댑터와 달리 MAC 주소가 할당되어 있지 않습니다.
- 스위칭 허브에는 MAC 주소와 포트 정보가 서로 매핑되어 저장되어있는 테이블이 존재한다.

- 스위칭 허브는 수신받은 데이터를 송신 동작을 하고 있는사이에 다른 기기가 보낸 신호가 수신측에 들어오면 패킷이 충돌하므로 `재밍 신호`를 보낸 후 송신 동작을 중지하고 잠시 기다렸다가 다시 보낸다.(LIKE `LAN 어댑터`)

<br>

#### 2. MAC 주소 테이블을 등록 및 갱신한다.

- 패킷을 수신했을 때 송신처 MAC 주소를 `조사`하고, 이것을 수신한 입력 포트 번호와 하나의 세트로 MAC 주소표에 `등록`한다.
- 스위칭 허브는 `일정시간마다 MAC주소를 삭제`하여 오래되었거나 혹시나 연결이 끊긴 정보에 대한 통신장애 방지한다.
- 결국 스위청 허브 자체는 스스로 등록하거나 삭제하므로 수동으로 등록 및 삭제할 필요가 없으며 새롭게 주소가 등록되도록 수동 갱신할 필요가 없다.

<br>

#### 3. 예외적인 동작

- 주소표에 등록되어 있는 송신 포트가 패킷을 수신한 포트와 같다고 가정한 상황일때, 이때는 스위칭 허브에 리피터 허브가 접속되어 있는 경우에 발생한다.
- PC A,B,가 리피터 허브에 붙어있고 리피터 허브는 스위칭 허브에 붙어있을때, PC A,B는 패킷을   리피터 허브에 전송하고 리피터 허브는 본인에게 접속되어있는 PC A,B 그리고 스위칭 허브에게 전송한다. PC B 는 리피터 허브로부터 그리고 스위칭 허브로 부터 패킷을 전송받게 되는데  결국 송신 포트와 전송 포트가 같기 때문에 스위칭 허브는 이럴경우 패킷을 중계하지 않고 폐기한다.
- MAC 주소표에 수신처 MAC 주소와 일치하는 주소가 없는 경우, 패킷을 수신한 포트 이외의 전체 포트에 패킷을 송신한다.
- 필요없는 패킷을 보내면 `LAN이 혼잡`해지는것을 걱정할 수 있지만 신경쓸 필요는 없다. 패킷을 보내고 무언가의 응답이 오면 주소표에 등록되고 2번째 이후에는 네트워크 전체에 패킷을 보내지 않는다.
- 수신처 MAC 주소가 `브로드캐스트 주소`인 경우 수신 포트를 제외하고 모든 포트에서 패킷을 송신한다.

<br>

#### 4. 전이중 모드에서 송신과 수신을 동시에 실행한다.

- 전이중 모드는 리피터 허브에는 없는 `스위칭 허브`의 특징이다.
- 송신과 수신을 동시에 실행할 수 있는 성질이다.
- `리피터 허브`를 사용하는 경우 여러 대의 컴퓨터가 동시에 송신 동작을 개시하면, 리피터 허브의 내부에서 신호가 뒤섞여서 신호가 파괴됩니다. 이것은 `충돌`이라는 현상으로 `이더넷의 중요한 성질`이지만 `스위칭 허브`에서는 일어나지 않는다.
- `스위칭 허브의 포트 부분`이나, `LAN 어댑터`에 있는 PHY회로와 MAC 회로의 내부도 송수신이 나뉘어져 있어 신호가 따로 흐르기 때문에 충돌하지 않는다.
- 송신할 때 신호가 흐르고 있어도 이것이 끝나기를 기다릴 필요가 없으므로 반이중 모드보다 빠르게 동작한다.
- 전이중 모드는 양방향으로 동시에 송신할 수 있고, 송신할 수 있는 데이터의 양 상한선도 높아서 성능도 좋다.

<br>

#### 5. 최적의 전송 속도로 보내는 자동 조정

- 상대의 전송 속도를 검출하여 전송 속도를 자동으로 전환하는데 이 기능을 `자동 조정` 이라 한다.

- 이더넷은 `링크 펄스`라는 펄스형 신호를 흘려서 데이터가 흐르고 있지 않을 때 이 신호를 흘려서 항상 무언가의 신호가 흐르게 해서 상대가 올바르게 작동하는지, 케이블이 단선되지 않았는지 등의 사항을 확인할 수 있다. 이더넷 기기에 커넥터 주변에 초록색 LED 표시등을 통해서 이 펄스형 신호가 흐르는지를 나타낸다.

<br>

#### 6. 스위칭 허브는 복수의 중계 동작을 동시에 실행한다.

- 스위칭 허브는 수신처  MAC 주소의 기기가 존재하는 포트 외에는 송신 동작을 실행하지 않는다.
- 때문에 놀고 있는 다른 포트에서 별도의 패킷을 흘릴 수 있어서 동시에 여러 개의 패킷을 중계할 수 있다.
- 리피터 허브는 들어온 신호를 모든 포트에서 뿌리므로 동시에 두 개 이상의 신호가 들어오면 패킷이 충돌하기 때문에 복수의 신호를 동시에 흘릴 수 없다.

#### 
